![ë¸”ë¡œê·¸ ì„¬ë„¤ì¼](public/readme/skk-blog-thumb.jpg)

> ğŸ  ë¸”ë¡œê·¸ ë°°í¬ ì£¼ì†Œ : [skk-blog](https://skkblog.com)

## ğŸ’¡ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ ê°œë°œ ì´ìœ 

1. **í•™ìŠµ ëª©ì **
   velogì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë„ ë„ˆë¬´ í›Œë¥­í•˜ê³  ì¢‹ê¸° ë•Œë¬¸ì— í•„ìš”ì— ì˜í•œ ê°œë°œì´ë¼ê¸° ë³´ë‹¤ëŠ” **ìˆœìˆ˜í•˜ê²Œ í•™ìŠµ ëª©ì **ìœ¼ë¡œ ì‘ì—…í•˜ì˜€ë‹¤ê³  ë³´ë©´ ì¢‹ì„ê²ƒê°™ìŠµë‹ˆë‹¤.

1. **ë‚˜ë§Œì˜ ë¸”ë¡œê·¸**
   ëª¨ë‘ì—ê²Œ ê³µê°œëœ ë¸”ë¡œê·¸ì˜ ì¥ì ë„ ìˆê² ì§€ë§Œ ë•Œë¡œëŠ” **ë‚˜ë§Œì˜ ë¹„ë°€ ì¼ê¸°ì¥** ëŠë‚Œë„ ì¢‹ì„ê²ƒê°™ì•„ì„œ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

1. **ê°œë°œ ë¶€í„° ë°°í¬ê¹Œì§€**
   ìš”ì¦˜ì€ ë„ˆë¬´ í¸ë¦¬í•˜ê²Œ ë°°í¬ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë§ê¸°ì—
   ì‹¤ì œë¡œ ë„ë©”ì¸ì— ì ‘ì†í•˜ê³ , ì„œë²„ì— ì ‘ê·¼í•˜ê³ ,... ì–´ë–¤ ê³¼ì •ì„ í†µí•´ ì§„í–‰ë˜ëŠ”ì§€ì— ëŒ€í•´ ìì„¸íˆ ì•Œê³  ì‹¶ì–´ì ¸ì„œ **ì§ì ‘ ë°°í¬**ë¥¼ í•´ë³´ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.

<br />

---

<br />

## ğŸ§‘â€ğŸ’» ì‚¬ìš©í•œ ê°œë°œ í™˜ê²½

### Next.js

Reactë¡œ ê°œë°œ í–ˆì„ë•Œì˜ ë¬¸ì œì ì´ë¼ê³  í•œë‹¤ë©´ ëª¨ë“  í˜ì´ì§€ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ë¶€í„° ë‹¤ìš´ë¡œë“œ ë°›ê³  í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ë Œë”ë§ í•˜ê¸° ë•Œë¬¸ì— SEOì— ë¶ˆì´ìµì´ ìˆê³ , ì´ˆê¸° ë¡œë”©ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—

1. **ì´ˆê¸° ë¡œë”©ì´ ë¹ ë¥´ê³ **
1. **SEO ìµœì í™”ì— ì´ì ì´ ìˆëŠ”**

Next.jsë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

### firebase - db, ìŠ¤í† ë¦¬ì§€

ì§ì ‘ ë°±ì—”ë“œì— ëŒ€í•´ ê³µë¶€í•˜ê³  ì œì‘í•  ìì‹ ì´ ì—†ì—ˆê¸°ì—
ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³  **ëŸ¬ë‹ì»¤ë¸Œê°€ ë¹„êµì  ë‚®ì€** Firebaseë¥¼ ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.

### ë¯¸ë‹ˆpc - Front-end ì„œë²„

aws s3 + ec2 + ë¡œë“œë°¸ëŸ°ì„œ ë“±ì„ ì‚¬ìš©í•˜ì—¬
https ì¸ì¦ì„œ + ìŠ¤í† ë¦¬ì§€ ì„œë²„ + í”„ë¡ íŠ¸ ì„œë²„ ë¥¼ ì œì‘í•˜ì—¬ ì‚¬ìš©ì¤‘ì—
ë¬¸ë“ ì§ì ‘ ì„œë²„ë¥¼ ì‚¬ìš©í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ì•Œë¦¬ í•«ë”œì´ ë–´ì„ë•Œ êµ¬ì…í•˜ì—¬ **ì§ì ‘ ì„œë²„ë¥¼ êµ¬ì¶•**í•˜ì˜€ìŠµë‹ˆë‹¤.
ë¸”ë¡œê·¸ ì„œë²„ êµ¬ì¶•ê¸°ëŠ” ì´í›„ì— í¬ìŠ¤íŒ…í•´ë³´ê² ìŠµë‹ˆë‹¤.

<br />

---

<br />

## ğŸ”¨ ì£¼ìš” í™”ë©´

> ğŸ  ë©”ì¸ í˜ì´ì§€ : /  
> ğŸ“’ ë¸”ë¡œê·¸ ëª©ë¡í˜ì´ì§€ : /free  
> âœï¸ ë¸”ë¡œê·¸ ìƒì„¸í˜ì´ì§€ : /free/:id  
> ğŸ§‘ ë§ˆì´í˜ì´ì§€ : /mypage  
> ë¡œê·¸ì¸/íšŒì›ê°€ì… : /auth/signin , /auth/signup

**pcì—ì„œ ë³¸ ë©”ì¸í˜ì´ì§€**  
![pcí™”ë©´](public/readme/pc-main.png)

**ëª¨ë°”ì¼ì—ì„œ ë³¸ ë©”ì¸í˜ì´ì§€**  
![ë¡œë”©í™”ë©´](public/readme/mobile-loading.gif)

<br />

<br />

<details>
<summary>ì£¼ìš” ì‘ì—… ë‚´ìš©</summary>

### ì´ˆê¸° ì„¤ì • (ê°„ë‹¨ ì„¤ëª…)

**next.js ì„¤ì¹˜**

skk-blogë¼ëŠ” ë¶€ë¶„ì€ í´ë”ëª…ì´ë‹ˆê¹Œ ì›í•˜ì‹œëŠ”ëŒ€ë¡œ ë³€ê²½í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
`yarn create next-app skk-blog --typescript`

**ê¸°ì´ˆì„¤ì • - next.config.js**

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  trailingSlash: true,
  // ì´ë¯¸ì§€ìµœì í™”ë¥¼ ìœ„í•´ì„œ ì €ì¥ë˜ì–´ìˆëŠ” ìŠ¤í† ë¦¬ì§€ ì£¼ì†Œë¥¼ ì ì–´ì¤ë‹ˆë‹¤.
  images: {
    domains: ["firebasestorage.googleapis.com", "localhost"],
    loader: "akamai",
    path: "",
  },
  generateBuildId: () => "skkblog-deploy-project",
  // ì•„ë˜ ì£¼ì†Œë“¤ë§Œ outí´ë”ì— ë§Œë“¤ì–´ì¤€ë‹¤. => getServerSidePropsìˆëŠ” í˜ì´ì§€ëŠ” ì œì™¸
  exportPathMap: () => ({
    "/": { page: "/" },
    "/auth/find-password": { page: "/auth/find-password" },
    "/auth/signin": { page: "/auth/signin" },
    "/auth/signup": { page: "/auth/signup" },
    "/free": { page: "/free" },
    "/free/new": { page: "/free/new" },
    "/404": { page: "/404" },
  }),
};

module.exports = nextConfig;
```

**mui ì„¤ì¹˜**
`yarn add @emotion/react @emotion/styled @mui/icons-material @mui/material`

ë” ìì„¸í•œ ì„¤ì •íŒŒì¼ì€ [github](https://github.com/skyeome/skk-blog)ì—ì„œ í™•ì¸ í•´ì£¼ì„¸ìš”!

---

### ë¡œê·¸ì¸ / íšŒì›ê°€ì… í˜ì´ì§€

ì´ë©”ì¼(ì•„ì´ë””) ë¹„ë°€ë²ˆí˜¸ ì–‘ì‹ì„ validation í•˜ê¸° ìœ„í•´ì„œ
`react-hook-form`ê³¼ `yup`ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

**ì„¤ì¹˜ ë°©ë²•**
`yarn add react-hook-form yup @hookform/resolvers`

**yup ì„¤ì • í•˜ê¸°**
yupì„ ì‚¬ìš©í•˜ì—¬ validationí•  `name`ê³¼ ì–´ë–¤ ê²€ì‚¬ë¥¼ í• ì§€ ì •ë¦¬í•´ì¤ë‹ˆë‹¤.
yup.object({}) ì•ˆì— yup.string(), yup.required() ë“±ì˜ ì¡°ê±´ì„ ë„£ì–´ì£¼ë©´ ê°„ë‹¨íˆ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ì‹œë©´ ì¢€ ë” ì´í•´í•˜ê¸° ì‰¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
// src/common/libraries/yup.ts

// ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ í•¨ìˆ˜
const chkEmail = async (
  value: string,
  values: yup.TestContext<any>
): Promise<boolean> => {
  try {
    const sn = await getDocs(
      query(collection(db, "User"), where("email", "==", value)) // ìœ ì € ì½œë ‰ì…˜ì— emailì´ ê°™ì€ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸ í•©ë‹ˆë‹¤.
    );
    const data = sn.docs;
    if (data.length === 0) {
      return true; // ê°™ì€ ìœ ì €ê°€ ì—†ìœ¼ë©´ trueë¥¼ ë°˜í™˜
    } else {
      return false; // ê°™ì€ ìœ ì €ê°€ ìˆìœ¼ë©´ falseë¥¼ ë°˜í™˜
    }
  } catch (e) {
    values.createError({ path: "purchase_code" });
    return false;
  }
};

// íšŒì›ê°€ì… ì˜ˆì‹œ
export const signUpSchema = yup.object({
  userId: yup
    .string()
    .required("ì´ë©”ì¼ ì£¼ì†Œ(ID)ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”")
    .email("ì´ë©”ì¼ í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”")
    .test(
      // ì´ë©”ì¼ ì¤‘ë³µì„ í™•ì¸í•©ë‹ˆë‹¤.
      "isInUseEmail",
      "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ ì…ë‹ˆë‹¤.",
      async (value, values) => {
        return await chkEmail(value, values);
      }
    ),
  nickname: yup.string().required("ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”"),
  password: yup
    .string()
    .required("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”")
    .matches(/^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,15}$/, {
      message: "ì˜ë¬¸ ìˆ«ì íŠ¹ìˆ˜ê¸°í˜¸ ì¡°í•© 8ìë¦¬ ì´ìƒìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”",
    })
    .max(15, "ë¹„ë°€ë²ˆí˜¸ëŠ” 15ìë¦¬ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    .min(8, "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìë¦¬ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."),
  password2: yup
    .string()
    .matches(/^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,15}$/, {
      message: "ì˜ë¬¸ ìˆ«ì íŠ¹ìˆ˜ê¸°í˜¸ ì¡°í•© 8ìë¦¬ ì´ìƒìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”",
    })
    .max(15, "ë¹„ë°€ë²ˆí˜¸ëŠ” 15ìë¦¬ ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    .min(8, "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìë¦¬ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.")
    // ë¹„ë°€ë²ˆí˜¸ê°€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
    .oneOf([yup.ref("password"), undefined], "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),
  term: yup.boolean().required("ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”").oneOf([true]),
  term2: yup
    .boolean()
    .required("ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ì£¼ì„¸ìš”")
    .oneOf([true]),
});
```

**ë¡œê·¸ì¸/íšŒì›ê°€ì… ui**
react-hook-formì€ uncontrolled ë°©ì‹ì´ê¸° ë•Œë¬¸ì— muiì™€ ê°™ì´ ì‚¬ìš©í•˜ë ¤ë©´ `<Controller />`ë¡œ ê°ì‹¸ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

`name`ì— react-hook-formìœ¼ë¡œ ë“±ë¡í•  nameì„ ì ì–´ì£¼ê³ 
`control` ì—ëŠ” useFormì—ì„œ ë°˜í™˜í•œ control ê°ì²´ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.
`render`ì—ëŠ” ì‹¤ì œ muiì˜ `<TextField />`ë¥¼ ì‚¬ìš©í•˜ì—¬ uië¥¼ ì œì‘í•˜ë©´ ë©ë‹ˆë‹¤.

```tsx
<Controller
  name="userId"
  control={control}
  render={({ field }) => (
    <TextField
      {...field}
      placeholder="ìˆ˜ì‹  ê°€ëŠ¥í•œ ì´ë©”ì¼ ì£¼ì†Œ(ID)ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”"
      sx={{ mb: 1 }}
      fullWidth
    />
  )}
/>
```

---

<br />

### ê¸€ ì‘ì„± : toast-ui editor

![ê¸€ ì‘ì„± í˜ì´ì§€](public/readme/create-post.png)

**ë§ˆí¬ë‹¤ìš´ ì‘ì„± : toast-ui editor**

notionì—ì„œë„ ì“°ì´ê³ , ì´ê¸€ì„ ì“°ëŠ” velogë„ ì“°ëŠ” ë¬¸ë²•ì¸ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì´ê¸° ë•Œë¬¸ì— ë²”ìš©ì„±ì´ ì¢‹ê³  ì‚¬ìš©ë²•ì´ ì‰¬ì›Œ ì„œë¡œ ê¸€ ë‚´ìš©ì„ ë³µì‚¬ ë¶™ì—¬ë„£ê¸° í•˜ë©´ì„œ ê³µìœ í•˜ê¸°ë„ í¸ë¦¬í•œê²ƒê°™ì•„ì„œ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ìœ ëª…í•œ ë§ˆí¬ë‹¤ìš´ ì—ë””í„°ì¤‘ í•˜ë‚˜ì¸ toast-ui editorë¥¼ ì‚¬ìš©í•˜ì—¬ ê°œë°œ í•˜ì˜€ìŠµë‹ˆë‹¤.

`yarn add @toast-ui/react-editor`ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**toast-ui editor ssr ë¬¸ì œ í•´ê²°**
toast-ui editorëŠ” SSRì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ importë¥¼ í•´ì„œ ì‚¬ìš©í•˜ë©´ "self is not defined... " ë¼ëŠ” ë¬¸êµ¬ê°€ ëœ¨ë©´ì„œ ì œëŒ€ë¡œ ë¡œë”©ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ ì´ìœ ëŠ” ì„œë²„ì—ì„œ ë Œë”ë§ì„ í•˜ëŠ” ë°©ì‹ì—ì„œëŠ” í”„ë¦¬ ë Œë”ë§ì´ë¼ëŠ” ê³¼ì •ì´ í•„ìš”í•œë° ì´ ê³¼ì •ì—ì„œëŠ” ì„œë²„ì¸¡ì—ì„œ ë Œë”ë§í•˜ëŠ”ê²ƒì´ê¸° ë•Œë¬¸ì—
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ `self`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ë¬¸ì œê°€ ìƒê¸´ë‹¤ê³  ì•Œê³  ìˆìŠµë‹ˆë‹¤.

`dynamic import`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ë¬¸ì œë¥¼ í•´ê²° í•´ì£¼ì–´ì•¼ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

```typescript
// src/components/units/board/write/BoardWrite.index.tsx
import dynamic from "next/dynamic";

// ...ê¸°íƒ€ ìƒëµ
const TuiEditor = dynamic(
  async () => await import("../../../commons/editor/TuiEditor"),
  { ssr: false }
);

function BoardWrite({ isEdit, data }: BoardWriteProps) {
  // useForm ë“±ì˜ ë¡œì§ë“¤...
  return (
    // ì œëª©, íƒœê·¸ ui...
    <TuiEditor
      showToast={showToast} // mui toastë¥¼ ë¶€ë¥´ëŠ” í•¨ìˆ˜ì „ë‹¬(toast editorì™€ëŠ” ë¬´ê´€)
      initialValue={data?.contents}
      editorRef={editorRef}
    />
    // ì„¬ë„¤ì¼ ì—…ë¡œë“œ ui...
  );
}
export default BoardWrite;
```

**ì—ë””í„°ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ**

toast-ui ì—ë””í„°ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œ í•˜ë©´ ê¸°ë³¸ ì„¤ì •ì€ base64 í˜•íƒœë¡œ ë¬¸ì„œì— ì €ì¥í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì¦‰ ì´ë¯¸ì§€ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë‚´ìš©ì´ ë³´ì—¬ì§€ê¸°ê¹Œì§€ ì˜¤ë˜ê±¸ë¦´ ìˆ˜ ìˆì–´, ë¡œë”©ì†ë„ì— ì§€ì¥ì„ ì¤„ ìˆ˜ ìˆë‹¤ëŠ” íŒë‹¨ì´ ë“¤ì–´ì„œ
ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” `addImageBlobHook`ì„ ì‚¬ìš©í•´ì„œ ì´ë¯¸ì§€ëŠ” ë”°ë¡œ ì—…ë¡œë“œ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œ ì˜€ìŠµë‹ˆë‹¤.

```tsx
// ...import ë¶€ë¶„
export default function TuiEditor({
  showToast,
  initialValue,
  editorRef,
}: EditorProps): JSX.Element {
  const onUploadImage = async (
    blob: Blob | File,
    callback: (url: string, text?: string) => void
  ): Promise<void> => {
    if (blob instanceof File) {
      const isValid = checkImageValidation(showToast, blob);
      if (!isValid) return;
      try {
        const storageRef = ref(storage, `images/${blob?.name ?? "file"}`);
        const uploadRef = await uploadBytes(storageRef, blob);
        const url = await getDownloadURL(uploadRef.ref);
        callback(url, blob?.name);
      } catch (error) {
        if (error instanceof Error) showToast("error", error.message);
      }
    }
  };
  return (
    <Editor
      previewStyle="vertical"
      height="400px"
      initialEditType="markdown"
      initialValue={initialValue ?? ""}
      ref={editorRef}
      hooks={{ addImageBlobHook: onUploadImage }}
    />
  );
}
```

**addImageBlobHook ì‘ë™ ì›ë¦¬**
ì—ë””í„°ì— ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œ ë˜ë©´ `addImageBlobHook`ì´ blobê³¼ callbackì„ ì œê°€ ë§Œë“  `onUploadImage`í•¨ìˆ˜ì— ì „ë‹¬í•´ì¤ë‹ˆë‹¤.

`onUploadImage`ì—ì„œëŠ”

1. **checkImageValidation**í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ê°€ ìš©ëŸ‰ì´ ë„ˆë¬´ í¬ì§€ëŠ” ì•Šì€ì§€, ì´ë¯¸ì§€ í˜•ì‹ì— **ì–´ê¸‹ë‚˜ì§€ëŠ” ì•ŠëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸** í•©ë‹ˆë‹¤.
1. ìœ íš¨ì„± ê²€ì‚¬ì— **í†µê³¼ëª»í•˜ë©´ early return**í•´ì„œ ì¤‘ë‹¨í•˜ê³ ,
1. í†µê³¼í•˜ì˜€ë‹¤ë©´, try-catchë¡œ **ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³ ** ì—ëŸ¬ë¥¼ catch í•©ë‹ˆë‹¤.
1. ìµœì¢…ì ìœ¼ë¡œ ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ urlê³¼ alt textë¥¼ **callbackì„ ì‹¤í–‰**í•˜ì—¬ ì „ë‹¬í•˜ë©´ ì´ë¯¸ì§€ê°€ ë°˜ì˜ë©ë‹ˆë‹¤.

<br />

### ê¸€ ì¡°íšŒ : viewer, getServerSideProps

toast-ui editorë¡œ ì‘ì„±í•œ ê¸€ì„ ë³´ë ¤ë©´ `<Viewer />` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë·°ì–´ë¡œ ê¸€ ë‚´ìš© ë³´ì—¬ì£¼ê¸°**
ë·°ì–´ ê°€ì ¸ì˜¤ê¸° (dynamic import í•„ìš”)

```typescript
const Viewer = dynamic(
  async () => await import("@toast-ui/react-editor").then((mod) => mod.Viewer),
  { ssr: false }
);
```

ë·°ì–´ ì‚¬ìš©í•˜ë ¤ë©´ `initialValue` propsì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤.

```
<Viewer initialValue={data.contents} />
```

**getServerSidePropsë¡œ ì•„ì´ë”” ê°’ ê°€ì ¸ì˜¤ê¸°**
useRouterë¥¼ ì‚¬ìš©í•˜ì—¬ /free/:id í˜•ì‹ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê²Œ ë˜ë©´ ì´ˆê¸°ì— ë°›ì•„ì˜¨ idì˜ ê°’ì´ undefinedê°€ ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ ë˜ë©´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ë•Œ idë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°›ì•„ì˜¤ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ì •ìƒì ìœ¼ë¡œ ë°›ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆê¸° ë•Œë¬¸ì—
`getServerSideProps`ë¡œ **idê°’ì„ ë¯¸ë¦¬ ë Œë”ë§ì „ ê°€ì ¸ì˜¤ê²Œ** ê°œë°œí•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
import type { InferGetServerSidePropsType, GetServerSideProps } from "next";
// ...ê¸°íƒ€ import ìƒëµ

export default function BoardDetailPage({
  id,
}: InferGetServerSidePropsType<typeof getServerSideProps>): JSX.Element {
  const router = useRouter();
  const result = useQueries([
    {
      queryKey: ["board", id],
      queryFn: async () => await getBoardDetail(id),
    },
    {
      queryKey: ["board", id, "comments"],
      queryFn: async () => await getCommentData(id),
    },
  ]);

  // ê²Œì‹œê¸€ì„ ì°¾ì§€ ëª»í•˜ì˜€ì„ë•Œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™
  useEffect(() => {
    if (result[0].isFetched && result[0].data === undefined)
      void router.replace("/free/not-found");
  }, [result[0].data, result[0].isFetched]);

  return (
    <>
      {result[0].data !== undefined && <BoardDetail data={result[0].data} />}
      <CommentWrite refetch={result[1].refetch} />
      <CommentList comments={result[1].data} />
    </>
  );
}

export const getServerSideProps: GetServerSideProps<{ id: string }> = async (
  context
) => {
  // contextì—ì„œ query ì¶”ì¶œ
  const { query } = context;
  // queryì—ì„œ boardIdë¥¼ ì¶”ì¶œ
  const { boardId } = query;
  let id = "";

  if (boardId === undefined) id = "";
  if (typeof boardId === "string") id = boardId;
  if (typeof boardId === "object") id = boardId[0];

  return {
    props: {
      id,
    },
  };
};
```

</details>
